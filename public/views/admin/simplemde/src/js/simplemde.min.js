"use strict";function fixShortcut(a){return a=isMac?a.replace("Ctrl","Cmd"):a.replace("Cmd","Ctrl")}function createIcon(a,b,c){a=a||{};var d=document.createElement("a");return b=void 0==b||b,a.title&&b&&(d.title=createTootlip(a.title,a.action,c),isMac&&(d.title=d.title.replace("Ctrl","⌘"),d.title=d.title.replace("Alt","⌥"))),d.tabIndex=-1,d.className=a.className,d}function createSep(){var a=document.createElement("i");return a.className="separator",a.innerHTML="|",a}function createTootlip(a,b,c){var d,e=a;return b&&(d=getBindingName(b),c[d]&&(e+=" ("+fixShortcut(c[d])+")")),e}function getState(a,b){b=b||a.getCursor("start");var c=a.getTokenAt(b);if(!c.type)return{};for(var d,e,f=c.type.split(" "),g={},h=0;h<f.length;h++)d=f[h],"strong"===d?g.bold=!0:"variable-2"===d?(e=a.getLine(b.line),/^\s*\d+\.\s/.test(e)?g["ordered-list"]=!0:g["unordered-list"]=!0):"atom"===d?g.quote=!0:"em"===d?g.italic=!0:"quote"===d?g.quote=!0:"strikethrough"===d?g.strikethrough=!0:"comment"===d?g.code=!0:"link"===d?g.link=!0:"tag"===d?g.image=!0:d.match(/^header(\-[1-6])?$/)&&(g[d.replace("header","heading")]=!0);return g}function toggleFullScreen(a){var b=a.codemirror;b.setOption("fullScreen",!b.getOption("fullScreen")),b.getOption("fullScreen")?(saved_overflow=document.body.style.overflow,document.body.style.overflow="hidden"):document.body.style.overflow=saved_overflow;var c=b.getWrapperElement();/fullscreen/.test(c.previousSibling.className)?c.previousSibling.className=c.previousSibling.className.replace(/\s*fullscreen\b/,""):c.previousSibling.className+=" fullscreen";var d=a.toolbarElements.fullscreen;/active/.test(d.className)?d.className=d.className.replace(/\s*active\s*/g,""):d.className+=" active",/editor-preview-active-side/.test(b.getWrapperElement().nextSibling.className)&&toggleSideBySide(a)}function toggleBold(a){_toggleBlock(a,"bold",a.options.blockStyles.bold)}function toggleItalic(a){_toggleBlock(a,"italic",a.options.blockStyles.italic)}function toggleStrikethrough(a){_toggleBlock(a,"strikethrough","~~")}function toggleCodeBlock(a){function b(a){if("object"!=typeof a)throw"fencing_line() takes a 'line' object (not a line number, or line text).  Got: "+typeof a+": "+a;return a.styles&&a.styles[2]&&-1!==a.styles[2].indexOf("formatting-code-block")}function c(a){return a.state.base.base||a.state.base}function d(a,d,e,f,g){e=e||a.getLineHandle(d),f=f||a.getTokenAt({line:d,ch:1}),g=g||!!e.text&&a.getTokenAt({line:d,ch:e.text.length-1});var h=f.type?f.type.split(" "):[];return g&&c(g).indentedCode?"indented":-1!==h.indexOf("comment")&&(c(f).fencedChars||c(g).fencedChars||b(e)?"fenced":"single")}function e(a,b,c,d){var e=b.line+1,f=c.line+1,g=b.line!==c.line,h=d+"\n",i="\n"+d;g&&f++,g&&0===c.ch&&(i=d+"\n",f--),_replaceSelection(a,!1,[h,i]),a.setSelection({line:e,ch:0},{line:f,ch:0})}var f,g,h,i=a.options.blockStyles.code,j=a.codemirror,k=j.getCursor("start"),l=j.getCursor("end"),m=j.getTokenAt({line:k.line,ch:k.ch||1}),n=j.getLineHandle(k.line),o=d(j,k.line,n,m);if("single"===o){var p=n.text.slice(0,k.ch).replace("`",""),q=n.text.slice(k.ch).replace("`","");j.replaceRange(p+q,{line:k.line,ch:0},{line:k.line,ch:99999999999999}),k.ch--,k!==l&&l.ch--,j.setSelection(k,l),j.focus()}else if("fenced"===o)if(k.line!==l.line||k.ch!==l.ch){for(f=k.line;f>=0&&(n=j.getLineHandle(f),!b(n));f--);var r,s,t,u,v=j.getTokenAt({line:f,ch:1}),w=c(v).fencedChars;b(j.getLineHandle(k.line))?(r="",s=k.line):b(j.getLineHandle(k.line-1))?(r="",s=k.line-1):(r=w+"\n",s=k.line),b(j.getLineHandle(l.line))?(t="",u=l.line,0===l.ch&&(u+=1)):0!==l.ch&&b(j.getLineHandle(l.line+1))?(t="",u=l.line+1):(t=w+"\n",u=l.line+1),0===l.ch&&(u-=1),j.operation(function(){j.replaceRange(t,{line:u,ch:0},{line:u+(t?0:1),ch:0}),j.replaceRange(r,{line:s,ch:0},{line:s+(r?0:1),ch:0})}),j.setSelection({line:s+(r?1:0),ch:0},{line:u+(r?1:-1),ch:0}),j.focus()}else{var x=k.line;if(b(j.getLineHandle(k.line))&&("fenced"===d(j,k.line+1)?(f=k.line,x=k.line+1):(g=k.line,x=k.line-1)),void 0===f)for(f=x;f>=0&&(n=j.getLineHandle(f),!b(n));f--);if(void 0===g)for(h=j.lineCount(),g=x;g<h&&(n=j.getLineHandle(g),!b(n));g++);j.operation(function(){j.replaceRange("",{line:f,ch:0},{line:f+1,ch:0}),j.replaceRange("",{line:g-1,ch:0},{line:g,ch:0})}),j.focus()}else if("indented"===o){if(k.line!==l.line||k.ch!==l.ch)f=k.line,g=l.line,0===l.ch&&g--;else{for(f=k.line;f>=0;f--)if(n=j.getLineHandle(f),!n.text.match(/^\s*$/)&&"indented"!==d(j,f,n)){f+=1;break}for(h=j.lineCount(),g=k.line;g<h;g++)if(n=j.getLineHandle(g),!n.text.match(/^\s*$/)&&"indented"!==d(j,g,n)){g-=1;break}}var y=j.getLineHandle(g+1),z=y&&j.getTokenAt({line:g+1,ch:y.text.length-1}),A=z&&c(z).indentedCode;A&&j.replaceRange("\n",{line:g+1,ch:0});for(var B=f;B<=g;B++)j.indentLine(B,"subtract");j.focus()}else{var C=k.line===l.line&&k.ch===l.ch&&0===k.ch,D=k.line!==l.line;C||D?e(j,k,l,i):_replaceSelection(j,!1,["`","`"])}}function toggleBlockquote(a){_toggleLine(a.codemirror,"quote")}function toggleHeadingSmaller(a){_toggleHeading(a.codemirror,"smaller")}function toggleHeadingBigger(a){_toggleHeading(a.codemirror,"bigger")}function toggleHeading1(a){_toggleHeading(a.codemirror,void 0,1)}function toggleHeading2(a){_toggleHeading(a.codemirror,void 0,2)}function toggleHeading3(a){_toggleHeading(a.codemirror,void 0,3)}function toggleUnorderedList(a){_toggleLine(a.codemirror,"unordered-list")}function toggleOrderedList(a){_toggleLine(a.codemirror,"ordered-list")}function cleanBlock(a){_cleanBlock(a.codemirror)}function drawLink(a){var b=a.codemirror,c=getState(b),d=a.options,e="http://";if(d.promptURLs&&!(e=prompt(d.promptTexts.link)))return!1;_replaceSelection(b,c.link,d.insertTexts.link,e)}function drawImage(a){var b=a.codemirror,c=getState(b),d=a.options,e="http://";if(d.promptURLs&&!(e=prompt(d.promptTexts.image)))return!1;_replaceSelection(b,c.image,d.insertTexts.image,e)}function drawTable(a){var b=a.codemirror,c=getState(b),d=a.options;_replaceSelection(b,c.table,d.insertTexts.table)}function drawHorizontalRule(a){var b=a.codemirror,c=getState(b),d=a.options;_replaceSelection(b,c.image,d.insertTexts.horizontalRule)}function undo(a){var b=a.codemirror;b.undo(),b.focus()}function redo(a){var b=a.codemirror;b.redo(),b.focus()}function toggleSideBySide(a){var b=a.codemirror,c=b.getWrapperElement(),d=c.nextSibling,e=a.toolbarElements["side-by-side"],f=!1;/editor-preview-active-side/.test(d.className)?(d.className=d.className.replace(/\s*editor-preview-active-side\s*/g,""),e.className=e.className.replace(/\s*active\s*/g,""),c.className=c.className.replace(/\s*CodeMirror-sided\s*/g," ")):(setTimeout(function(){b.getOption("fullScreen")||toggleFullScreen(a),d.className+=" editor-preview-active-side"},1),e.className+=" active",c.className+=" CodeMirror-sided",f=!0);var g=c.lastChild;if(/editor-preview-active/.test(g.className)){g.className=g.className.replace(/\s*editor-preview-active\s*/g,"");var h=a.toolbarElements.preview,i=c.previousSibling;h.className=h.className.replace(/\s*active\s*/g,""),i.className=i.className.replace(/\s*disabled-for-preview*/g,"")}var j=function(){d.innerHTML=a.options.previewRender(a.value(),d)};b.sideBySideRenderingFunction||(b.sideBySideRenderingFunction=j),f?(d.innerHTML=a.options.previewRender(a.value(),d),b.on("update",b.sideBySideRenderingFunction)):b.off("update",b.sideBySideRenderingFunction),b.refresh()}function togglePreview(a){var b=a.codemirror,c=b.getWrapperElement(),d=c.previousSibling,e=!!a.options.toolbar&&a.toolbarElements.preview,f=c.lastChild;f&&/editor-preview/.test(f.className)||(f=document.createElement("div"),f.className="editor-preview",c.appendChild(f)),/editor-preview-active/.test(f.className)?(f.className=f.className.replace(/\s*editor-preview-active\s*/g,""),e&&(e.className=e.className.replace(/\s*active\s*/g,""),d.className=d.className.replace(/\s*disabled-for-preview*/g,""))):(setTimeout(function(){f.className+=" editor-preview-active"},1),e&&(e.className+=" active",d.className+=" disabled-for-preview")),f.innerHTML=a.options.previewRender(a.value(),f),/editor-preview-active-side/.test(b.getWrapperElement().nextSibling.className)&&toggleSideBySide(a)}function _replaceSelection(a,b,c,d){if(!/editor-preview-active/.test(a.getWrapperElement().lastChild.className)){var e,f=c[0],g=c[1],h=a.getCursor("start"),i=a.getCursor("end");d&&(g=g.replace("#url#",d)),b?(e=a.getLine(h.line),f=e.slice(0,h.ch),g=e.slice(h.ch),a.replaceRange(f+g,{line:h.line,ch:0})):(e=a.getSelection(),a.replaceSelection(f+e+g),h.ch+=f.length,h!==i&&(i.ch+=f.length)),a.setSelection(h,i),a.focus()}}function _toggleHeading(a,b,c){if(!/editor-preview-active/.test(a.getWrapperElement().lastChild.className)){for(var d=a.getCursor("start"),e=a.getCursor("end"),f=d.line;f<=e.line;f++)!function(d){var e=a.getLine(d),f=e.search(/[^#]/);e=void 0!==b?f<=0?"bigger"==b?"###### "+e:"# "+e:6==f&&"smaller"==b?e.substr(7):1==f&&"bigger"==b?e.substr(2):"bigger"==b?e.substr(1):"#"+e:1==c?f<=0?"# "+e:f==c?e.substr(f+1):"# "+e.substr(f+1):2==c?f<=0?"## "+e:f==c?e.substr(f+1):"## "+e.substr(f+1):f<=0?"### "+e:f==c?e.substr(f+1):"### "+e.substr(f+1),a.replaceRange(e,{line:d,ch:0},{line:d,ch:99999999999999})}(f);a.focus()}}function _toggleLine(a,b){if(!/editor-preview-active/.test(a.getWrapperElement().lastChild.className)){for(var c=getState(a),d=a.getCursor("start"),e=a.getCursor("end"),f={quote:/^(\s*)\>\s+/,"unordered-list":/^(\s*)(\*|\-|\+)\s+/,"ordered-list":/^(\s*)\d+\.\s+/},g={quote:"> ","unordered-list":"* ","ordered-list":"1. "},h=d.line;h<=e.line;h++)!function(d){var e=a.getLine(d);e=c[b]?e.replace(f[b],"$1"):g[b]+e,a.replaceRange(e,{line:d,ch:0},{line:d,ch:99999999999999})}(h);a.focus()}}function _toggleBlock(a,b,c,d){if(!/editor-preview-active/.test(a.codemirror.getWrapperElement().lastChild.className)){d=void 0===d?c:d;var e,f=a.codemirror,g=getState(f),h=c,i=d,j=f.getCursor("start"),k=f.getCursor("end");g[b]?(e=f.getLine(j.line),h=e.slice(0,j.ch),i=e.slice(j.ch),"bold"==b?(h=h.replace(/(\*\*|__)(?![\s\S]*(\*\*|__))/,""),i=i.replace(/(\*\*|__)/,"")):"italic"==b?(h=h.replace(/(\*|_)(?![\s\S]*(\*|_))/,""),i=i.replace(/(\*|_)/,"")):"strikethrough"==b&&(h=h.replace(/(\*\*|~~)(?![\s\S]*(\*\*|~~))/,""),i=i.replace(/(\*\*|~~)/,"")),f.replaceRange(h+i,{line:j.line,ch:0},{line:j.line,ch:99999999999999}),"bold"==b||"strikethrough"==b?(j.ch-=2,j!==k&&(k.ch-=2)):"italic"==b&&(j.ch-=1,j!==k&&(k.ch-=1))):(e=f.getSelection(),"bold"==b?(e=e.split("**").join(""),e=e.split("__").join("")):"italic"==b?(e=e.split("*").join(""),e=e.split("_").join("")):"strikethrough"==b&&(e=e.split("~~").join("")),f.replaceSelection(h+e+i),j.ch+=c.length,k.ch=j.ch+e.length),f.setSelection(j,k),f.focus()}}function _cleanBlock(a){if(!/editor-preview-active/.test(a.getWrapperElement().lastChild.className))for(var b,c=a.getCursor("start"),d=a.getCursor("end"),e=c.line;e<=d.line;e++)b=a.getLine(e),b=b.replace(/^[ ]*([# ]+|\*|\-|[> ]+|[0-9]+(.|\)))[ ]*/,""),a.replaceRange(b,{line:e,ch:0},{line:e,ch:99999999999999})}function _mergeProperties(a,b){for(var c in b)b.hasOwnProperty(c)&&(b[c]instanceof Array?a[c]=b[c].concat(a[c]instanceof Array?a[c]:[]):null!==b[c]&&"object"==typeof b[c]&&b[c].constructor===Object?a[c]=_mergeProperties(a[c]||{},b[c]):a[c]=b[c]);return a}function extend(a){for(var b=1;b<arguments.length;b++)a=_mergeProperties(a,arguments[b]);return a}function wordCount(a){var b=/[a-zA-Z0-9_\u0392-\u03c9\u0410-\u04F9]+|[\u4E00-\u9FFF\u3400-\u4dbf\uf900-\ufaff\u3040-\u309f\uac00-\ud7af]+/g,c=a.match(b),d=0;if(null===c)return d;for(var e=0;e<c.length;e++)c[e].charCodeAt(0)>=19968?d+=c[e].length:d+=1;return d}function SimpleMDE(a){a=a||{},a.parent=this;var b=!0;if(!1===a.autoDownloadFontAwesome&&(b=!1),!0!==a.autoDownloadFontAwesome)for(var c=document.styleSheets,d=0;d<c.length;d++)c[d].href&&c[d].href.indexOf("//maxcdn.bootstrapcdn.com/font-awesome/")>-1&&(b=!1);if(b){var e=document.createElement("link");e.rel="stylesheet",e.href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css",document.getElementsByTagName("head")[0].appendChild(e)}if(a.element)this.element=a.element;else if(null===a.element)return void console.log("SimpleMDE: Error. No element was found.");if(void 0===a.toolbar){a.toolbar=[];for(var f in toolbarBuiltInButtons)toolbarBuiltInButtons.hasOwnProperty(f)&&(-1!=f.indexOf("separator-")&&a.toolbar.push("|"),(!0===toolbarBuiltInButtons[f].default||a.showIcons&&a.showIcons.constructor===Array&&-1!=a.showIcons.indexOf(f))&&a.toolbar.push(f))}a.hasOwnProperty("status")||(a.status=["autosave","lines","words","cursor"]),a.previewRender||(a.previewRender=function(a){return this.parent.markdown(a)}),a.parsingConfig=extend({highlightFormatting:!0},a.parsingConfig||{}),a.insertTexts=extend({},insertTexts,a.insertTexts||{}),a.promptTexts=promptTexts,a.blockStyles=extend({},blockStyles,a.blockStyles||{}),a.shortcuts=extend({},shortcuts,a.shortcuts||{}),void 0!=a.autosave&&void 0!=a.autosave.unique_id&&""!=a.autosave.unique_id&&(a.autosave.uniqueId=a.autosave.unique_id),this.options=a,this.render(),!a.initialValue||this.options.autosave&&!0===this.options.autosave.foundSavedValue||this.value(a.initialValue)}function isLocalStorageAvailable(){if("object"!=typeof localStorage)return!1;try{localStorage.setItem("smde_localStorage",1),localStorage.removeItem("smde_localStorage")}catch(a){return!1}return!0}var CodeMirror=require("codemirror");require("codemirror/addon/edit/continuelist.js"),require("./codemirror/tablist"),require("codemirror/addon/display/fullscreen.js"),require("codemirror/mode/markdown/markdown.js"),require("codemirror/addon/mode/overlay.js"),require("codemirror/addon/display/placeholder.js"),require("codemirror/addon/selection/mark-selection.js"),require("codemirror/mode/gfm/gfm.js"),require("codemirror/mode/xml/xml.js");var CodeMirrorSpellChecker=require("codemirror-spell-checker"),marked=require("marked"),isMac=/Mac/.test(navigator.platform),bindings={toggleBold:toggleBold,toggleItalic:toggleItalic,drawLink:drawLink,toggleHeadingSmaller:toggleHeadingSmaller,toggleHeadingBigger:toggleHeadingBigger,drawImage:drawImage,toggleBlockquote:toggleBlockquote,toggleOrderedList:toggleOrderedList,toggleUnorderedList:toggleUnorderedList,toggleCodeBlock:toggleCodeBlock,togglePreview:togglePreview,toggleStrikethrough:toggleStrikethrough,toggleHeading1:toggleHeading1,toggleHeading2:toggleHeading2,toggleHeading3:toggleHeading3,cleanBlock:cleanBlock,drawTable:drawTable,drawHorizontalRule:drawHorizontalRule,undo:undo,redo:redo,toggleSideBySide:toggleSideBySide,toggleFullScreen:toggleFullScreen},shortcuts={toggleBold:"Cmd-B",toggleItalic:"Cmd-I",drawLink:"Cmd-K",toggleHeadingSmaller:"Cmd-H",toggleHeadingBigger:"Shift-Cmd-H",cleanBlock:"Cmd-E",drawImage:"Cmd-Alt-I",toggleBlockquote:"Cmd-'",toggleOrderedList:"Cmd-Alt-L",toggleUnorderedList:"Cmd-L",toggleCodeBlock:"Cmd-Alt-C",togglePreview:"Cmd-P",toggleSideBySide:"F9",toggleFullScreen:"F11"},getBindingName=function(a){for(var b in bindings)if(bindings[b]===a)return b;return null},isMobile=function(){var a=!1;return function(b){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(b)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(b.substr(0,4)))&&(a=!0)}(navigator.userAgent||navigator.vendor||window.opera),a},saved_overflow="",toolbarBuiltInButtons={bold:{name:"bold",action:toggleBold,className:"fa fa-bold",title:"Bold",default:!0},italic:{name:"italic",action:toggleItalic,className:"fa fa-italic",title:"Italic",default:!0},strikethrough:{name:"strikethrough",action:toggleStrikethrough,className:"fa fa-strikethrough",title:"Strikethrough"},heading:{name:"heading",action:toggleHeadingSmaller,className:"fa fa-header",title:"Heading",default:!0},"heading-smaller":{name:"heading-smaller",action:toggleHeadingSmaller,className:"fa fa-header fa-header-x fa-header-smaller",title:"Smaller Heading"},"heading-bigger":{name:"heading-bigger",action:toggleHeadingBigger,className:"fa fa-header fa-header-x fa-header-bigger",title:"Bigger Heading"},"heading-1":{name:"heading-1",action:toggleHeading1,className:"fa fa-header fa-header-x fa-header-1",title:"Big Heading"},"heading-2":{name:"heading-2",action:toggleHeading2,className:"fa fa-header fa-header-x fa-header-2",title:"Medium Heading"},"heading-3":{name:"heading-3",action:toggleHeading3,className:"fa fa-header fa-header-x fa-header-3",title:"Small Heading"},"separator-1":{name:"separator-1"},code:{name:"code",action:toggleCodeBlock,className:"fa fa-code",title:"Code"},quote:{name:"quote",action:toggleBlockquote,className:"fa fa-quote-left",title:"Quote",default:!0},"unordered-list":{name:"unordered-list",action:toggleUnorderedList,className:"fa fa-list-ul",title:"Generic List",default:!0},"ordered-list":{name:"ordered-list",action:toggleOrderedList,className:"fa fa-list-ol",title:"Numbered List",default:!0},"clean-block":{name:"clean-block",action:cleanBlock,className:"fa fa-eraser fa-clean-block",title:"Clean block"},"separator-2":{name:"separator-2"},link:{name:"link",action:drawLink,className:"fa fa-link",title:"Create Link",default:!0},image:{name:"image",action:drawImage,className:"fa fa-picture-o",title:"Insert Image",default:!0},table:{name:"table",action:drawTable,className:"fa fa-table",title:"Insert Table"},"horizontal-rule":{name:"horizontal-rule",action:drawHorizontalRule,className:"fa fa-minus",title:"Insert Horizontal Line"},"separator-3":{name:"separator-3"},preview:{name:"preview",action:togglePreview,className:"fa fa-eye no-disable",title:"Toggle Preview",default:!0},"side-by-side":{name:"side-by-side",action:toggleSideBySide,className:"fa fa-columns no-disable no-mobile",title:"Toggle Side by Side",default:!0},fullscreen:{name:"fullscreen",action:toggleFullScreen,className:"fa fa-arrows-alt no-disable no-mobile",title:"Toggle Fullscreen",default:!0},"separator-4":{name:"separator-4"},guide:{name:"guide",action:"https://simplemde.com/markdown-guide",className:"fa fa-question-circle",title:"Markdown Guide",default:!0},"separator-5":{name:"separator-5"},undo:{name:"undo",action:undo,className:"fa fa-undo no-disable",title:"Undo"},redo:{name:"redo",action:redo,className:"fa fa-repeat no-disable",title:"Redo"}},insertTexts={link:["[","](#url#)"],image:["![](","#url#)"],table:["","\n\n| Column 1 | Column 2 | Column 3 |\n| -------- | -------- | -------- |\n| Text     | Text     | Text     |\n\n"],horizontalRule:["","\n\n-----\n\n"]},promptTexts={link:"URL for the link:",image:"URL of the image:"},blockStyles={bold:"**",code:"```",italic:"*"};SimpleMDE.prototype.markdown=function(a){if(marked){var b={};return this.options&&this.options.renderingConfig&&!1===this.options.renderingConfig.singleLineBreaks?b.breaks=!1:b.breaks=!0,this.options&&this.options.renderingConfig&&!0===this.options.renderingConfig.codeSyntaxHighlighting&&window.hljs&&(b.highlight=function(a){return window.hljs.highlightAuto(a).value}),marked.setOptions(b),marked(a)}},SimpleMDE.prototype.render=function(a){if(a||(a=this.element||document.getElementsByTagName("textarea")[0]),!this._rendered||this._rendered!==a){this.element=a;var b=this.options,c=this,d={};for(var e in b.shortcuts)null!==b.shortcuts[e]&&null!==bindings[e]&&function(a){d[fixShortcut(b.shortcuts[a])]=function(){bindings[a](c)}}(e);d.Enter="newlineAndIndentContinueMarkdownList",d.Tab="tabAndIndentMarkdownList",d["Shift-Tab"]="shiftTabAndUnindentMarkdownList",d.Esc=function(a){a.getOption("fullScreen")&&toggleFullScreen(c)},document.addEventListener("keydown",function(a){a=a||window.event,27==a.keyCode&&c.codemirror.getOption("fullScreen")&&toggleFullScreen(c)},!1);var f,g;if(!1!==b.spellChecker?(f="spell-checker",g=b.parsingConfig,g.name="gfm",g.gitHubSpice=!1,CodeMirrorSpellChecker({codeMirrorInstance:CodeMirror})):(f=b.parsingConfig,f.name="gfm",f.gitHubSpice=!1),this.codemirror=CodeMirror.fromTextArea(a,{mode:f,backdrop:g,theme:"paper",tabSize:void 0!=b.tabSize?b.tabSize:2,indentUnit:void 0!=b.tabSize?b.tabSize:2,indentWithTabs:!1!==b.indentWithTabs,lineNumbers:!1,autofocus:!0===b.autofocus,extraKeys:d,lineWrapping:!1!==b.lineWrapping,allowDropFileTypes:["text/plain"],placeholder:b.placeholder||a.getAttribute("placeholder")||"",styleSelectedText:void 0==b.styleSelectedText||b.styleSelectedText}),!0===b.forceSync){var h=this.codemirror;h.on("change",function(){h.save()})}this.gui={},!1!==b.toolbar&&(this.gui.toolbar=this.createToolbar()),!1!==b.status&&(this.gui.statusbar=this.createStatusbar()),void 0!=b.autosave&&!0===b.autosave.enabled&&this.autosave(),this.gui.sideBySide=this.createSideBySide(),this._rendered=this.element;var i=this.codemirror;setTimeout(function(){i.refresh()}.bind(i),0)}},SimpleMDE.prototype.autosave=function(){if(isLocalStorageAvailable()){var a=this;if(void 0==this.options.autosave.uniqueId||""==this.options.autosave.uniqueId)return void console.log("SimpleMDE: You must set a uniqueId to use the autosave feature");null!=a.element.form&&void 0!=a.element.form&&a.element.form.addEventListener("submit",function(){localStorage.removeItem("smde_"+a.options.autosave.uniqueId)}),!0!==this.options.autosave.loaded&&("string"==typeof localStorage.getItem("smde_"+this.options.autosave.uniqueId)&&""!=localStorage.getItem("smde_"+this.options.autosave.uniqueId)&&(this.codemirror.setValue(localStorage.getItem("smde_"+this.options.autosave.uniqueId)),this.options.autosave.foundSavedValue=!0),this.options.autosave.loaded=!0),localStorage.setItem("smde_"+this.options.autosave.uniqueId,a.value());var b=document.getElementById("autosaved");if(null!=b&&void 0!=b&&""!=b){var c=new Date,d=c.getHours(),e=c.getMinutes(),f="am",g=d;g>=12&&(g=d-12,f="pm"),0==g&&(g=12),e=e<10?"0"+e:e,b.innerHTML="Autosaved: "+g+":"+e+" "+f}this.autosaveTimeoutId=setTimeout(function(){a.autosave()},this.options.autosave.delay||1e4)}else console.log("SimpleMDE: localStorage not available, cannot autosave")},SimpleMDE.prototype.clearAutosavedValue=function(){if(isLocalStorageAvailable()){if(void 0==this.options.autosave||void 0==this.options.autosave.uniqueId||""==this.options.autosave.uniqueId)return void console.log("SimpleMDE: You must set a uniqueId to clear the autosave value");localStorage.removeItem("smde_"+this.options.autosave.uniqueId)}else console.log("SimpleMDE: localStorage not available, cannot autosave")},SimpleMDE.prototype.createSideBySide=function(){var a=this.codemirror,b=a.getWrapperElement(),c=b.nextSibling;c&&/editor-preview-side/.test(c.className)||(c=document.createElement("div"),c.className="editor-preview-side",b.parentNode.insertBefore(c,b.nextSibling));var d=!1,e=!1;return a.on("scroll",function(a){if(d)return void(d=!1);e=!0;var b=a.getScrollInfo().height-a.getScrollInfo().clientHeight,f=parseFloat(a.getScrollInfo().top)/b,g=(c.scrollHeight-c.clientHeight)*f;c.scrollTop=g}),c.onscroll=function(){if(e)return void(e=!1);d=!0;var b=c.scrollHeight-c.clientHeight,f=parseFloat(c.scrollTop)/b,g=(a.getScrollInfo().height-a.getScrollInfo().clientHeight)*f;a.scrollTo(0,g)},c},SimpleMDE.prototype.createToolbar=function(a){if((a=a||this.options.toolbar)&&0!==a.length){var b;for(b=0;b<a.length;b++)void 0!=toolbarBuiltInButtons[a[b]]&&(a[b]=toolbarBuiltInButtons[a[b]]);var c=document.createElement("div");c.className="editor-toolbar";var d=this,e={};for(d.toolbar=a,b=0;b<a.length;b++)if(("guide"!=a[b].name||!1!==d.options.toolbarGuideIcon)&&!(d.options.hideIcons&&-1!=d.options.hideIcons.indexOf(a[b].name)||("fullscreen"==a[b].name||"side-by-side"==a[b].name)&&isMobile())){if("|"===a[b]){for(var f=!1,g=b+1;g<a.length;g++)"|"===a[g]||d.options.hideIcons&&-1!=d.options.hideIcons.indexOf(a[g].name)||(f=!0);if(!f)continue}!function(a){var b;b="|"===a?createSep():createIcon(a,d.options.toolbarTips,d.options.shortcuts),a.action&&("function"==typeof a.action?b.onclick=function(b){b.preventDefault(),a.action(d)}:"string"==typeof a.action&&(b.href=a.action,b.target="_blank")),e[a.name||a]=b,c.appendChild(b)}(a[b])}d.toolbarElements=e;var h=this.codemirror;h.on("cursorActivity",function(){var a=getState(h);for(var b in e)!function(b){var c=e[b];a[b]?c.className+=" active":"fullscreen"!=b&&"side-by-side"!=b&&(c.className=c.className.replace(/\s*active\s*/g,""))}(b)});var i=h.getWrapperElement();return i.parentNode.insertBefore(c,i),c}},SimpleMDE.prototype.createStatusbar=function(a){a=a||this.options.status;var b=this.options,c=this.codemirror;if(a&&0!==a.length){var d,e,f,g=[];for(d=0;d<a.length;d++)if(e=void 0,f=void 0,"object"==typeof a[d])g.push({className:a[d].className,defaultValue:a[d].defaultValue,onUpdate:a[d].onUpdate});else{var h=a[d];"words"===h?(f=function(a){a.innerHTML=wordCount(c.getValue())},e=function(a){a.innerHTML=wordCount(c.getValue())}):"lines"===h?(f=function(a){a.innerHTML=c.lineCount()},e=function(a){a.innerHTML=c.lineCount()}):"cursor"===h?(f=function(a){a.innerHTML="0:0"},e=function(a){var b=c.getCursor();a.innerHTML=b.line+":"+b.ch}):"autosave"===h&&(f=function(a){void 0!=b.autosave&&!0===b.autosave.enabled&&a.setAttribute("id","autosaved")}),g.push({className:h,defaultValue:f,onUpdate:e})}var i=document.createElement("div");for(i.className="editor-statusbar",d=0;d<g.length;d++){var j=g[d],k=document.createElement("span");k.className=j.className,"function"==typeof j.defaultValue&&j.defaultValue(k),"function"==typeof j.onUpdate&&this.codemirror.on("update",function(a,b){return function(){b.onUpdate(a)}}(k,j)),i.appendChild(k)}var l=this.codemirror.getWrapperElement();return l.parentNode.insertBefore(i,l.nextSibling),i}},SimpleMDE.prototype.value=function(a){return void 0===a?this.codemirror.getValue():(this.codemirror.getDoc().setValue(a),this)},SimpleMDE.toggleBold=toggleBold,SimpleMDE.toggleItalic=toggleItalic,SimpleMDE.toggleStrikethrough=toggleStrikethrough,SimpleMDE.toggleBlockquote=toggleBlockquote,SimpleMDE.toggleHeadingSmaller=toggleHeadingSmaller,SimpleMDE.toggleHeadingBigger=toggleHeadingBigger,SimpleMDE.toggleHeading1=toggleHeading1,SimpleMDE.toggleHeading2=toggleHeading2,SimpleMDE.toggleHeading3=toggleHeading3,SimpleMDE.toggleCodeBlock=toggleCodeBlock,SimpleMDE.toggleUnorderedList=toggleUnorderedList,SimpleMDE.toggleOrderedList=toggleOrderedList,SimpleMDE.cleanBlock=cleanBlock,SimpleMDE.drawLink=drawLink,SimpleMDE.drawImage=drawImage,SimpleMDE.drawTable=drawTable,SimpleMDE.drawHorizontalRule=drawHorizontalRule,SimpleMDE.undo=undo,SimpleMDE.redo=redo,SimpleMDE.togglePreview=togglePreview,SimpleMDE.toggleSideBySide=toggleSideBySide,SimpleMDE.toggleFullScreen=toggleFullScreen,SimpleMDE.prototype.toggleBold=function(){toggleBold(this)},SimpleMDE.prototype.toggleItalic=function(){toggleItalic(this)},SimpleMDE.prototype.toggleStrikethrough=function(){toggleStrikethrough(this)},SimpleMDE.prototype.toggleBlockquote=function(){toggleBlockquote(this)},SimpleMDE.prototype.toggleHeadingSmaller=function(){toggleHeadingSmaller(this)},SimpleMDE.prototype.toggleHeadingBigger=function(){toggleHeadingBigger(this)},SimpleMDE.prototype.toggleHeading1=function(){toggleHeading1(this)},SimpleMDE.prototype.toggleHeading2=function(){toggleHeading2(this)},SimpleMDE.prototype.toggleHeading3=function(){toggleHeading3(this)},SimpleMDE.prototype.toggleCodeBlock=function(){toggleCodeBlock(this)},SimpleMDE.prototype.toggleUnorderedList=function(){toggleUnorderedList(this)},SimpleMDE.prototype.toggleOrderedList=function(){toggleOrderedList(this)},SimpleMDE.prototype.cleanBlock=function(){cleanBlock(this)},SimpleMDE.prototype.drawLink=function(){drawLink(this)},SimpleMDE.prototype.drawImage=function(){drawImage(this)},SimpleMDE.prototype.drawTable=function(){drawTable(this)},SimpleMDE.prototype.drawHorizontalRule=function(){drawHorizontalRule(this)},SimpleMDE.prototype.undo=function(){undo(this)},SimpleMDE.prototype.redo=function(){redo(this)},SimpleMDE.prototype.togglePreview=function(){togglePreview(this)},SimpleMDE.prototype.toggleSideBySide=function(){toggleSideBySide(this)},SimpleMDE.prototype.toggleFullScreen=function(){toggleFullScreen(this)},SimpleMDE.prototype.isPreviewActive=function(){return/editor-preview-active/.test(this.codemirror.getWrapperElement().lastChild.className)},SimpleMDE.prototype.isSideBySideActive=function(){return/editor-preview-active-side/.test(this.codemirror.getWrapperElement().nextSibling.className)},SimpleMDE.prototype.isFullscreenActive=function(){return this.codemirror.getOption("fullScreen")},SimpleMDE.prototype.getState=function(){return getState(this.codemirror)},SimpleMDE.prototype.toTextArea=function(){var a=this.codemirror,b=a.getWrapperElement();b.parentNode&&(this.gui.toolbar&&b.parentNode.removeChild(this.gui.toolbar),this.gui.statusbar&&b.parentNode.removeChild(this.gui.statusbar),this.gui.sideBySide&&b.parentNode.removeChild(this.gui.sideBySide)),a.toTextArea(),this.autosaveTimeoutId&&(clearTimeout(this.autosaveTimeoutId),this.autosaveTimeoutId=void 0,this.clearAutosavedValue())},module.exports=SimpleMDE;
//# sourceMappingURL=simplemde.min.js.map