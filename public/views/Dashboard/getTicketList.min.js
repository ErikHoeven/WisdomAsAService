function getTicketList(a,b,c,d){var e;if(console.info("FILTER: "+Array.isArray(b)),1!=Array.isArray(b))console.info("filter is object"),e="All"!=b?_.where(a,{"Responsible Group":b.Group,State:b.State}):_.where(a,{State:b.State});else{var f=[],e=[];b.forEach(function(b){f=_.where(a,{"Responsible Group":b.Group,State:b.State}),Array.prototype.push.apply(e,f)}),console.info(e)}var g={};return g.divTable="ticketsList",g.tableName="tblticketsList",g.keyColumn=["_id"],g.hideColumns=["Company","Customer Reference","count","Customer Free Text","ticketType","EPS - Cognos_Count","Last Change","Responsible Group","snapshotDate","lastChange","","aggGrain","Reason for waiting"],g.title="Business Rules",g.editRow="Y",g.isEditable="N",g.sourceCollection="stgOmniTracker",console.info("tickets after filter"),console.info(e),console.info("Gen Table"),"EPS - SRL_Count"==b.Group&&(console.info("EPS - SRL_Count Hit"),g.hideColumns.push("EPS - SRL_Count")),genericTable(e,g,c,d)}function genericTable(a,b,c,d){var e,f,g=[],h="",i=0,j="",k=[],l=[],m=-1,n=0,o=0,p="",q=b.keyColumn.concat(b.hideColumns),r=b.sourceCollection,s=0;g=Object.keys(a[0]),console.info("--------------------------------------------------------------------"),console.info("titel: "+b.title),console.info("KeyColumn: "+b.keyColumn),console.info("hideColls:"+q),console.info("cols: "+g),console.info("totHideCols: "+q.length),console.info("div place: "+b.divTable),console.info("div name: "+b.tableName),console.info("pagnationStep: "+c),console.info("actualStep: "+d),console.info("datalength: "+a.length),o=q.length;var t=Math.ceil(a.length/c);console.info("steps: "+t),console.info(g),console.info(r),e=1==d?0:d*c-(c+1),f=d*c,console.info("startingStepRow: "+e),console.info("lastStepRow: "+f),g.forEach(function(a){a!=findHideCols(a,q)&&(h=h+"<th>"+a+"</th>")}),"Y"==b.editRow?(h+="<th>edit</th><th>delete</th>",o+=1):h=h;for(var i=0;i<g.length;i++)l.push({column:g[i],col_pos:i});return console.info("Clean columns: "+(l.length-o)),console.info(o),console.info("----------------------------------------------------------------------------------"),a.forEach(function(a){k=Object.keys(a),m=0;var c='<td id="update'+a._id+'"><span class="glyphicon glyphicon-pencil" onclick="updateField(\''+p+"','"+a._id+"','"+r+'\')"></span></td><td><span class="glyphicon glyphicon-trash" onclick="deleteRow(\''+a._id+"')\"></td>";if(0==n&&n==e&&(j="<tr>",k.forEach(function(b){l.forEach(function(c){c.column==b&&c.col_pos>m&&b!=findHideCols(b,q)&&(j=0==Array.isArray(a[b])?j+'<td id="'+b+a._id+'">'+a[b]+"</td>":j+'<td id="'+b+a._id+'" align="center"><i class="fa fa-binoculars" onclick="searchArray(\''+b+"','"+a._id+"','"+r+"','N')\"></i></td>",m=c.col_pos)})}),"Y"==b.editRow?j=j+c+"</tr>":j+="</tr>"),n>0&&n<=f&&n>=e){m=0;k.length,g.length;k.forEach(function(d){l.forEach(function(e){0==a[d].length&&(a[d]="NaV"),d!=findHideCols(d,q)&&e.column==d&&e.col_pos>m&&(s=0,0==m&&0==s&&("N"==b.isEditable&&(j=j+'<tr><td id="'+d+a._id+'">'+a[d]+"</td>"),"Y"==b.isEditable&&(j=j+'<tr><td id="'+d+a._id+'"><input type="text" id="txt'+d+a._id+'">'+a[d]+"</input></td>"),m++,s=1),m>0&&m<l.length-o&&0==s&&(j=j+'<td id="'+d+a._id+'">'+a[d]+"</td>",m++,s=1),m==l.length-o&&0==s&&("Y"==b.editRow?(rowDef=rowDefinition(k,q,a._id),c='<td id="update'+a._id+'"><span class="glyphicon glyphicon-pencil" onclick="updateField(\''+rowDef+"','"+r+'\')"></span></td><td><span class="glyphicon glyphicon-trash" onclick="deleteRow(\''+a._id+"')\"></td>",j=j+'<td id="'+d+a._id+'">'+a[d]+"</td>"+c+"</tr>"):j=j+'<td id="'+d+a._id+'">'+a[d]+"</td></tr>"))})})}n++}),{tableName:b.tableName,strColumns:h,strData:j,div:b.divTable}}function findHideCols(a,b){var c=0;return b.forEach(function(b){b==a&&(c=1)}),1==c?a:"N"}function rowDefinition(a,b,c){var d,e=0;return d=c,a.forEach(function(a){a!=findHideCols(a,b)&&(d=d+","+a+c,e++)}),d}function searchDefiniton(a,b){}function setPagnation(a,b,c,d){tickets="All"!=d?_.where(a,{"Responsible Group":d.Group,State:d.State}):_.where(a,{State:d.State}),console.info("dataLenght:"+tickets.length);var e=tickets.length/b;console.info("pagnationsteps: "+e);for(var f='<ul class="pagination">',g=0;g<e;g++){f=f+'<li><a href="#'+(g+1)+'">'+g+"</a></li>"}return f}function update(a,b,c){console.info("updateConfirmed:"),console.info("---------------------"),console.info("column: "+a),console.info("id: "+b),console.info("value:"+d);var d,e=[],f="",g=a.split(","),h=[],i={};console.info("-----------------------------------------------------"),g.forEach(function(d){$("."+d).each(function(a,b){f=$(b).html()?$(b).html():$(b).val(),e.push(f)}),a=d.replace("txt","").replace(b,""),i[a]=e,i.id=b,i.collection=c,h.push(i)}),console.info(h[0])}function updateField(a,b){console.info(" -- updateFields --"),console.info(b);var c,d=a.split(","),e=0,f=d[0];console.info($("[id='Affected Person59a9534a5560ad4272f88603']").text()),d.forEach(function(a){if(e>0){var b=$('[id="'+a+'"]').text();$('[id="'+a+'"]').html('<input id="txt'+a+'" type="text" value="'+b+'"></input>'),1==e&&(c="txt"+a),e>1&&(c=c+",txt"+a)}e++}),$("#update"+f).html('<button id="cmdSave" type="button" class="btn btn-default btn-sm" onclick="update(\''+c+"','"+f+"','"+b+'\')"><span class="glyphicon glyphicon-ok"></span></button>')}
//# sourceMappingURL=getTicketList.min.js.map