function filterTickets(a,b){var c=[],d={};if(b.forEach(function(a){a.snapshotDate&&(a.snapshotDate=moment(a.snapshotDate).format("DD-MM-YYYY"))}),"All"!=a){c=_.where(b,{Group:a});var e=d3.nest().key(function(a){return a.snapshotDate}).rollup(function(a){return{cpf:d3.sum(a,function(a){return a.cpf}),esoft:d3.sum(a,function(a){return a.esoft}),firstLine:d3.sum(a,function(a){return a.firstLine}),infra:d3.sum(a,function(a){return a.infra}),secondLineApps:d3.sum(a,function(a){return a.secondLineApps}),cognos:d3.sum(a,function(a){return a.cognos}),desktopVirtualisatie:d3.sum(a,function(a){return a.desktopVirtualisatie}),srl:d3.sum(a,function(a){return a.srl})}}).entries(b)}else{c=b,console.info("returnArray");var e=d3.nest().key(function(a){return a.snapshotDate}).rollup(function(a){return{cpf:d3.sum(a,function(a){return a.cpf}),esoft:d3.sum(a,function(a){return a.esoft}),firstLine:d3.sum(a,function(a){return a.firstLine}),infra:d3.sum(a,function(a){return a.infra}),secondLineApps:d3.sum(a,function(a){return a.secondLineApps}),infra:d3.sum(a,function(a){return a.infra}),cognos:d3.sum(a,function(a){return a.cognos}),desktopVirtualisatie:d3.sum(a,function(a){return a.desktopVirtualisatie}),srl:d3.sum(a,function(a){return a.srl})}}).entries(c),f=[];Object.keys(e[0].value).forEach(function(a){f.push(e[0].value[a])})}var g=c,h=d3.nest().key(function(a){return a.snapshotDate}).rollup(function(a){return{countCreatedTickets:d3.sum(a,function(a){return a.countCreatedTickets}),countOpenTickets:d3.sum(a,function(a){return a.countOpenTickets}),countSolvedTickets:d3.sum(a,function(a){return a.countSolvedTickets})}}).entries(g);c.forEach(function(a){var b=moment(a.CreationDate).format("DD-MM-YYYY");a.CreationDate=b});var i=0,j=[],k={};if(g=g.reverse(),h.length>1){console.info("countsPerDayCattegory.length > 1");var h=_.sortBy(h,function(a){return moment(a.key,"DD-MM-YYYY")}),l=[];h.forEach(function(a){null!=a.key?(console.info(a.key),l.push(a)):console.info("ignore")}),console.info(l);for(var m=0;m<l.length;m++)0==m&&j.push({datum:l[m].key,createdTickets:l[m].value.countCreatedTickets,opentTickets:l[m].value.countOpenTickets,ticketStock:0,solvedTickets:l[m].value.countSolvedTickets}),m>0&&"Invalid date"!=l[m].datum&&(i=l[m-1].value.countCreatedTickets+l[m-1].value.countOpenTickets+i-l[m-1].value.countSolvedTickets,i<=0&&(i=0),j.push({datum:l[m].key,createdTickets:l[m].value.countCreatedTickets,opentTickets:l[m].value.countOpenTickets,ticketStock:i,solvedTickets:l[m].value.countSolvedTickets}));console.info("--------- Stock ---------------"),console.info(j),console.info("--------- Stock ---------------"),k=j[j.length-1],d.stockValues=k,d.fltrData=c,d.countPerDay=e}else h[0].value.ticketStock=i,h[0].value.createdTickets=h[0].value.countCreatedTickets,h[0].value.solvedTickets=h[0].value.countSolvedTickets,h[0].value.openTickets=h[0].value.countOpenTickets,d.stockValues=l[0].value,d.fltrData=c,d.countPerDay=e;return d}
//# sourceMappingURL=filterTickets.min.js.map