var EditableGrid_check_lib=null;EditableGrid.prototype.checkChartLib=function(){try{$("dummy").highcharts()}catch(a){return alert("HighCharts library not loaded!"),!1}return!0},EditableGrid.prototype.hex2rgba=function(a,b){"undefined"==typeof b&&(b=1);var c={red:parseInt(a.substr(1,2),16),green:parseInt(a.substr(3,2),16),blue:parseInt(a.substr(5,2),16)};return"rgba("+c.red+","+c.green+","+c.blue+","+b+")"},EditableGrid.prototype.getFormattedValue=function(a,b){try{var c=document.createElement("div"),d=this.getColumn(a).cellRenderer;return d._render(0,a,c,b),c.innerHTML}catch(e){return b}},EditableGrid.prototype.skipRow=function(a){if("1"==this.getRowAttribute(a,"skip"))return!0;var b=this.getRow(a);return b&&b.style&&"none"==b.style.display?!0:b&&"undefined"!=typeof b.expanded&&null!==b.expanded?b.expanded:!1},EditableGrid.prototype.renderBarChart=function(divId,title,labelColumnIndexOrName,options){var self=this;this.legend=null,this.bgColor=null,this.alpha=.9,this.limit=0,this.bar3d=!1,this.rotateXLabels=0;var rowIndexByPoint={};with(this){if(null===EditableGrid_check_lib&&(EditableGrid_check_lib=checkChartLib()),!EditableGrid_check_lib)return!1;if(options)for(var p in options)this[p]=options[p];labelColumnIndexOrName=labelColumnIndexOrName||0;var cLabel=getColumnIndex(labelColumnIndexOrName),columnCount=getColumnCount(),rowCount=getRowCount()-(ignoreLastRow?1:0);limit>0&&rowCount>limit&&(rowCount=limit);var type=options.type||"column",chart={chart:{type:type,backgroundColor:bgColor,plotBackgroundColor:bgColor,height:null,options3d:{enabled:bar3d}},plotOptions:{column:{stacking:options.stacking||"",groupPadding:.1,pointPadding:.1,borderWidth:0},bar:{stacking:options.stacking||"",groupPadding:.1,pointPadding:.1,borderWidth:0},line:{step:"center",lineWidth:4,zIndex:1e3,marker:{enabled:!1,states:{hover:{enabled:!1}}}},scatter:{zIndex:1e3,marker:{symbol:"diamond",lineColor:null,lineWidth:4,states:{hover:{enabled:!1}}}}},legend:{align:"center",verticalAlign:"bar"==type?"top":"bottom",margin:"bar"==type?40:12,floating:!1},credits:{enabled:!1},title:{text:title},tooltip:{pointFormatter:function(){return this.series.name+"<b>: "+self.getFormattedValue(this.series.options.colIndex,this.y)+"</b>"}}};chart.xAxis={title:{text:legend||getColumnLabel(labelColumnIndexOrName)},labels:{rotation:rotateXLabels}},chart.xAxis.categories=[];for(var r=0;rowCount>r;r++)if(!skipRow(r)){var label=getRowAttribute(r,"barlabel");chart.xAxis.categories.push(label?label:getValueAt(r,cLabel))}chart.series=[],chart.yAxis=[];for(var c=0;columnCount>c;c++)if(isColumnBar(c)){for(var yAxisIndex=-1,unit=getColumnUnit(c),cy=0;cy<chart.yAxis.length;cy++)chart.yAxis[cy].unit==unit&&(yAxisIndex=cy);0>yAxisIndex&&(yAxisIndex=chart.yAxis.length,chart.yAxis.push({unit:unit,title:{text:""},labels:{format:"{value} "+(unit?unit:"")},reversedStacks:"undefined"==typeof options.reversedStacks?!1:!!options.reversedStacks}));for(var serie={name:getColumnLabel(c),stack:getColumnStack(c),yAxis:yAxisIndex,colIndex:c,data:[]},r=0;rowCount>r;r++)if(!skipRow(r)){var value=getValueAt(r,c);rowIndexByPoint[serie.data.length]=r,serie.data.push(value)}chart.series.push(serie)}if("bar"==type){var stacks={};chart.chart.height=100;for(var s=0;s<chart.series.length;s++)chart.series[s].stack in stacks||(stacks[chart.series[s].stack]=!0,chart.chart.height+=40*serie.data.length)}if($("#"+divId).highcharts(chart,function(a){var b=null;a.series[0]&&$.each(a.series[0].points,function(b,c){var d=rowIndexByPoint[b],e=self.getRowAttribute(d,"reference_columns");return e?void $.each(e,function(b,c){var e=self.getValueAt(d,self.getColumnIndex(c.column));a.yAxis[0].max<e&&a.yAxis[0].setExtremes(null,e)}):!1}),a.series[0]&&$.each(a.series[0].points,function(c,d){var e=rowIndexByPoint[c],f=self.getRowAttribute(e,"reference_columns");if(!f)return!1;if(null===b){var g=null;b=0,$.each(a.series[0].points,function(a,c){g&&(b=c.plotX-g),g=c.plotX}),0==b&&(b=a.plotWidth)}$.each(f,function(c,f){var g=self.getValueAt(e,self.getColumnIndex(f.column)),h={"stroke-width":2,stroke:"black",zIndex:3};if(f.style)for(var i in f.style)h[i]=f.style[i];var j=a.yAxis[0].toPixels(g),k=a.plotLeft+d.plotX-b/2;a.renderer.path(["M",k,j,"L",k+b,j]).attr(h).add()})})}),options.noDataMessage){var container=$("#"+divId).highcharts();0==chart.series.length&&container.showLoading(options.noDataMessage)}}},EditableGrid.prototype.renderStackedBarChart=function(a,b,c,d){return d=d||{},d.stacking="normal",this.renderBarChart(a,b,c,d)},EditableGrid.prototype.renderPieChart=function(divId,title,valueColumnIndexOrName,labelColumnIndexOrName,options){if(this.startAngle=0,this.bgColor=null,this.alpha=.9,this.limit=0,this.pie3d=!1,this.gradientFill=!0,options)for(var p in options)this[p]=options[p];with(this){if(null===EditableGrid_check_lib&&(EditableGrid_check_lib=checkChartLib()),!EditableGrid_check_lib)return!1;labelColumnIndexOrName=labelColumnIndexOrName||0,title="undefined"==typeof title||null===title?getColumnLabel(valueColumnIndexOrName):title;var cValue=getColumnIndex(valueColumnIndexOrName),cLabel=getColumnIndex(labelColumnIndexOrName),rowCount=getRowCount()-(ignoreLastRow?1:0);limit>0&&rowCount>limit&&(rowCount=limit);var type=getColumnType(valueColumnIndexOrName);if("double"!=type&&"integer"!=type&&cValue!=cLabel)return!1;var chart={chart:{type:"pie",backgroundColor:bgColor,plotBackgroundColor:bgColor,plotBorderWidth:0,options3d:{enabled:pie3d,alpha:45}},credits:{enabled:!1},title:{text:title},tooltip:{pointFormat:"{series.name}: <b>{point.percentage:.1f}%</b>"},plotOptions:{pie:{dataLabels:{enabled:!0,format:cValue==cLabel?"<b>{point.name}</b>":"<b>{point.name}</b><br/>{point.formattedValue}"},startAngle:startAngle}}};chart.series=[];var serie={name:title,data:[]};if(chart.series.push(serie),cValue==cLabel){for(var distinctValues={},r=0;rowCount>r;r++)if(!skipRow(r)){var rowValue=getValueAt(r,cValue);rowValue in distinctValues?distinctValues[rowValue]++:distinctValues[rowValue]=1}for(var value in distinctValues){var occurences=distinctValues[value];serie.data.push({y:occurences,name:value,formattedValue:value})}chart.series.push(serie)}else for(var r=0;rowCount>r;r++)if(!skipRow(r)){var value=getValueAt(r,cValue),label=getRowAttribute(r,"barlabel");null===value||isNaN(value)||serie.data.push({y:value,name:label?label:getValueAt(r,cLabel),formattedValue:this.getFormattedValue(cValue,value)})}return $("#"+divId).highcharts(chart),serie.data.length}},EditableGrid.prototype.clearChart=function(a){$("#"+a).html("")};
//# sourceMappingURL=editablegrid_charts.min.js.map